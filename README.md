# A Toolbox for Migrating the Blockchain-based Application from Ethereum to Hyperledger Fabric

It is a toolbox designed for developers who want to migrate the blockchain-based applications from the Ethereum public blockchain to the permissioned blockchain built by Hyperledger Fabric.

The low transaction capacity (i.e., 15 transaction per second (TPS)), high transaction cost, and long-term privacy concerns of the current Ethereum are forcing developers to seek alternative blockchain platforms to migrate their application in order to reduce their applications' use-cost and improve their applications' user experience.

Hyperledger Fabric (HLF) platform introduces a new modular and extensible blockchain architecture with resiliency, flexibility, scalability, and confidentiality. It allows developers to flexibly select appropriate components, such as consensus protocols and membership services, according to their specific requirements. Compared to the Ethereum platform, developers can use the HLF platform to build blockchain-based applications with higher transaction capacity, lower use-cost, and better  privacy protection capabilities.

Hence, we designed a toolbox to help developers automatically migrate their applications from Ethereum to HLF. Specially, the toolbox provides following functions to ease the migration process

- Account Migration

  Ethereum is a public blockchain. The user can use almost all blockchain-based applications on the Ethereum platform as long as he/she generates a pair of public/private keys using the wallet (e.g., MetaMask).  On the contray, the blockchain built by HLF is a permissioned blockchain where the user has to obtain a valid and authorized identity in the permissioned network. Hence, The public key generated by the user’s Ethereum wallet will be not recognized after the application migration.  To solve the problem, the toolbox provides the account migration function to enable users to continue to use their identities.

- Interaction Transformation

  The blockchain based application on the Ethereum platform typically uses specific libraries (e.g., Web3.js or Ethers.js) to interact with the Ethereum node. If the migrated application still uses those libraries, it will fail to interact with the node in the HLF blockchain network, which may prevent the application from working properly.  To solve the problem, the toolbox provides automatic interaction transformation.

- Smart Contract Migration

  Besides migrating the Ethereum smart contract code, the toolbox can be used to migrate the state of the smart contract.

- Binding Mechanism

  Integrating the EVM into the HLF platform results in two smart contract deployment methods on the HLF platform.  One is the smart
  contract deployment method of the Ethereum platform, and the other is the smart contract deployment method of the HLF platform. On the Ethereum platform, any smart contract code of the blockchain-based application is allowed to be deployed without reviewing and testing. The platform relies on the gas fee mechanism to defend against the malicious codes (e.g., codes containing infinite loop) that may stall the platform. On the HLF platform, the gas fee mechanism is removed to reduce the application’s use-cost. The platform relies on mandatory code checks before deploying the smart contract to detect the malicious codes . Suppose the HLF platform integrates the EVM to support the application migration. In that case, attackers can bypass the code checks and inject the malicious codes into the HLF platform by selecting the smart contract deployment method of the Ethereum platform. Without the protection of the gas fee mechanism, any node in the HLF will be stalled by running the malicious codes, thereby destroying the application’s availability. To solve the problem, the toolbox will generates a chaincode and binds it with the migrated smart contract.

  ![image-20221007092643929](C:\Users\desly\AppData\Roaming\Typora\typora-user-images\image-20221007092643929.png)

## Deploying the toolbox

1. Bring up a permission blockchain network using HLF

   Please refer to [using the fabric test network](https://hyperledger-fabric.readthedocs.io/en/latest/test_network.html) and [deploying a production network](https://hyperledger-fabric.readthedocs.io/en/latest/deployment_guide_overview.html#step-one-decide-on-your-network-configuration)

2. Install and instantiate the EVM written in chaincode to the network
